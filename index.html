<html>
<script src="https://aframe.io/releases/0.6.1/aframe.js"></script>
<script src="js/aframe-ar.js"></script>
<script src="https://unpkg.com/aframe-text-component/dist/aframe-text-component.min.js"></script>
<script src="js/index.js"></script>

<head>
    <meta name="apple-mobile-web-app-capable" content="yes">
</head>

<body style='margin : 0px; overflow: hidden;'>
    <a-scene embedded arjs='sourceType: webcam; debugUIEnabled: false;trackingMethod: best'>

        <a-assets>
            <!-- <video id="pg" playsinline defaultMuted muted autoplay loop="true" src="V.mp4"></video> -->
            <a-asset-item id="mario-obj" src="3d/mario.obj"></a-asset-item>
            <a-asset-item id="mario-mtl" src="3d/mario.mtl"></a-asset-item>
            <a-asset-item id="hello-obj" src="3d/hello.obj"></a-asset-item>
            <a-asset-item id="hello-mtl" src="3d/hello.mtl"></a-asset-item>

            <a-asset-item id="qbz-obj" src="3d/block/lucky.obj"></a-asset-item>
            <a-asset-item id="qbz-mtl" src="3d/block/lucky.mtl"></a-asset-item>
            <a-asset-item id="coin-obj" src="3d/lucky/coin.obj"></a-asset-item>
            <a-asset-item id="coin-mtl" src="3d/lucky/coin.mtl"></a-asset-item>
            <video id="hyper" playsinline defaultMuted muted autoplay loop="true" src="compressed/hyper.mp4"></video>
            <video id="magic" playsinline defaultMuted muted autoplay loop="true" src="compressed/magicleap.mp4"></video>
            <video id="thysen" playsinline defaultMuted muted autoplay loop="true" src="compressed/thysen.mp4"></video>
            <video id="constr" playsinline defaultMuted muted autoplay loop="true" src="compressed/vrconst.mp4"></video>
        </a-assets>
        <!-- The intro section plays the hyper reality video! -->
        <!-- <a-marker preset="kanji" id="Intro">
                    <a-video rotation="0 0 180" width="3" src="#pg" autoplay="true"></a-video>
                </a-marker> -->

        <a-marker type='pattern' url='marker/heart.patt' id="argame">
            <!-- <a-video rotation="0 0 180" width="3" src="#pg" autoplay="true"></a-video>
                     -->

            <a-entity id="brick" scale="0.005 0.005 0.005" sound="src: url(coin.mp3); on: click" position="0 0 0" rotation="45 0 180"
                shadow="cast: true" obj-model="obj: #qbz-obj; mtl: #qbz-mtl">
                <!-- <a-animation begin="mouseenter" fill="forwards" repeat="1" direction="alternate" attribute="position" from="0 0 0" to="0 -0.2 0"
                    dur="500"></a-animation> -->
            </a-entity>

            <a-entity id="coix" scale="1 1 1" rotation="45 0 180" position="0 -1 0" shadow="cast: true" obj-model="obj: #coin-obj; mtl: #coin-mtl">
                <a-animation attribute="rotation" dur="400" direction="alternate" from="45 0 0" to="45 360 0" repeat="indefinite">
                </a-animation>
                <a-animation attribute="position" dur="400" direction="alternate" from="0 0 0" to="0 -1 0" repeat="indefinite">
                </a-animation>
            </a-entity>
        </a-marker>
        <a-marker type='pattern' url='marker/box.patt' id="hyperreality">
            <a-video position="-1 0 0" rotation="0 180 180" width="3" src="#hyper" autoplay="true"></a-video>
        </a-marker>

        <a-marker type='pattern' url='marker/vrcon.patt' id="vrcont">
            <a-video position="-1 0 0" rotation="0 180 180" width="3" src="#constr" autoplay="true"></a-video>
        </a-marker>

        <a-marker type='pattern' url='marker/banner.patt' id="magicleap">
            <a-video position="-1 0 0" rotation="0 180 180" width="3" src="#magic" autoplay="true"></a-video>
        </a-marker>

        <a-marker type='pattern' url='marker/thysen.patt' id="thysen">
            <a-video position="-1 0 0" rotation="0 180 180" width="3" src="#thysen" autoplay="true"></a-video>
        </a-marker>

        <!-- define a simple camera -->
        <a-entity camera>
            <a-entity cursor="fuse: true; fuseTimeout: 1250" position="0 0 -1" geometry="primitive: ring; radiusInner: 0.005; radiusOuter: 0.01"
                material="color: black; shader: flat">
            </a-entity>
        </a-entity>
    </a-scene>
    <script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
        crossorigin="anonymous"></script>
</body>

<script>
    setInterval(function () {
        var video = document.getElementById('hyper');
        video.play();
    }, 1000);

    setInterval(function () {
        var video = document.getElementById('magic');
        video.play();
    }, 1000);

    setInterval(function () {
        var video = document.getElementById('thysen');
        video.play();
    }, 1000);

    setInterval(function () {
        var video = document.getElementById('constr');
        video.play();
    }, 1000);

    var targetEl = document.querySelector('#brick');
    targetEl.addEventListener('click', function () {
        setTimeout(function () {
            document.querySelector('#coix').setAttribute('visible', false);
        }, 1000);
        document.querySelector('#coix').setAttribute('visible', true);
        // alert("HHA");
    });

    document.body.innerHTML = document.body.innerHTML + "<div style='position:fixed;bottom:5px;left:1.25%;padding:2px;width:95%;height:40px;background:rgba(0,0,0,0.5);color:white;font-weight:bold;text-align:center;margin:5px;font-size:9px'>Scan the AR markers in the article using this app.Keep the article open on another device</div>";
//You can delete this line to hide the info message that appears on screen
</script>

</script>

</html>